<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Preach Point</title>
  <link rel="stylesheet" href="style.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script defer src="script.js"></script>
</head>
<link rel="icon" type="image/png" href="/favicon.png">
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
  import { getAuth, onAuthStateChanged, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyB6mjVxBIW8d2dMD6jRe9MD257qsNC2Ia0",
    authDomain: "preach-point.firebaseapp.com",
    projectId: "preach-point",
    storageBucket: "preach-point.firebasestorage.app",
    messagingSenderId: "699269130347",
    appId: "1:699269130347:web:a6617996b042821089692e",
    measurementId: "G-3L6CZ43J51"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  window.__auth = auth; // expose to script.js

  onAuthStateChanged(auth, (user) => {
    // Optional: show a small banner if not signed in
    if (!user) console.log('Not signed in'); else console.log('Signed in:', user.email);
  });
</script>


<body>
<!-- Add near the top of <body> on index.html -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
  import { getAuth }       from "https://www.gstatic.com/firebasejs/10.12.4/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyB6mjVxBIW8d2dMD6jRe9MD257qsNC2Ia0",
    authDomain: "preach-point.firebaseapp.com",
    projectId: "preach-point",
    storageBucket: "preach-point.firebasestorage.app",
    messagingSenderId: "699269130347",
    appId: "1:699269130347:web:a6617996b042821089692e",
    measurementId: "G-3L6CZ43J51"
  };
  const app  = initializeApp(firebaseConfig);
  window.__auth = getAuth(app); // <- used by script.js safeFetchJson / guardAccess
</script>

  <!-- Keep the app hidden until /api/me says OK -->
  <div id="app" hidden>
    <div class="container">
      <header class="app-title">
        <img id="logo" src="/logo.png" alt="Preach Point Logo" />
      </header>

      <form id="preachpoint-form">
        <label id="lang-label" for="lang">Language</label>
        <select id="lang">
          <option value="en">English</option>
          <option value="af">Afrikaans</option>
        </select>

        <label id="book-label" for="book">Book</label>
        <select id="book"></select>

        <label id="chapter-label" for="chapter">Start Chapter</label>
        <select id="chapter"></select>

        <label id="verse-label" for="verse">Start Verse</label>
        <select id="verse"></select>

        <label id="end-chapter-label" for="end-chapter">End Chapter</label>
        <select id="end-chapter"></select>

        <label id="end-verse-label" for="end-verse">End Verse</label>
        <select id="end-verse"></select>

        <label id="tone-label" for="tone">Tone</label>
        <select id="tone"></select>

        <label id="level-label" for="level">Explanation Level</label>
        <select id="level">
          <option value="short">Short</option>
          <option value="sermon">Sermon-Style</option>
          <option value="full">Full Commentary</option>
        </select>

        <button id="generate-btn" type="button">Generate Commentary</button>
      </form>

      <div id="output">
        <h2 id="verses-heading">Bible Text</h2>
        <div id="verses"></div>

        <h2 id="commentary-heading">Commentary</h2>
        <div id="commentary"></div>

        <h2 id="devotion-heading">Devotion</h2>
        <div id="devotionOutput"></div>

        <h2 id="prayer-heading">Prayer</h2>
        <div id="prayer"></div>
      </div>

      <div class="actions">
        <button id="reset-btn" type="button">Reset Fields</button>
        <button id="download-pdf" type="button">Download as PDF</button>
      </div>
    </div>
  </div>

  <noscript>This app requires JavaScript.</noscript>
</body>
</html>
